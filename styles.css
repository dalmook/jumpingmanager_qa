/* =========================
File: styles.css (Jumping Battle orange theme)
========================= */

:root{
  /* Jumping Battle vibe */
  --bg:#ffffff;
  --fg:#1f1a17;
  --muted:#8f8b86;

  --card:#ffffff;
  --line:#f1eee9;

  --primary:#ff7a00;     /* 메인 주황 */
  --primary-2:#ff9740;   /* 밝은 주황 */
  --ghost:#fff3e8;       /* 오렌지톤 고스트 */
  --accent:#66d7c4;      /* 보조 민트 */

  --danger:#ff6b81;
  --shadow: 0 10px 24px rgba(255,122,0,.12);
  --radius: 18px;

  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-rounded, "SF Pro Rounded", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--fg); background: var(--bg);
}

/* iOS Header */
.ios-header{
  position:sticky; top:0; z-index:1000;
  backdrop-filter: saturate(180%) blur(16px);
  background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.8));
  border-bottom:1px solid var(--line);
}
.safe-pad{ height: calc(var(--safe-top, 0px)); }
.header-inner{ padding: 14px 16px 14px; position: relative; }
.header-top{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap }
.brand{ display:flex; align-items:center; gap:8px }
.logo-dot{ width:12px; height:12px; border-radius:50%; background:linear-gradient(135deg,#ffc08a,#ff7a00) }
.brand-text{ font-size:15px; font-weight:900; color:#ff7a00; letter-spacing:.2px }
.large-title{ margin:6px 0 2px; font-size:30px; font-weight:900; letter-spacing:.2px; color:#ff7a00 }
.subtitle{ margin:0; color:var(--muted); font-size:13px }

/* Auth */
.auth-area { width: 100%; }
#signedOut.auth-row{
  max-width: 520px; margin: 10px auto 0; gap: 10px;
}
#signedOut.auth-row input{
  flex:1 1 100%; min-width:0; width:100%;
  font-size:16px; padding:14px 16px;
}
#signedOut.auth-row .btn{
  flex:1 1 48%; font-size:16px; padding:14px 16px;
}
@media (max-width: 420px){ #signedOut.auth-row .btn{ flex-basis:100%; } }

.auth-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.auth-row input{
  flex:1; min-width:220px; padding:12px 14px; border-radius:14px;
  border:1px solid var(--line); background:#fff; box-shadow: var(--shadow);
}

/* Buttons */
.btn{ padding:12px 16px; border-radius:14px; border:0; background:var(--ghost); color:#7a4b1a; font-weight:800; box-shadow: var(--shadow) }
.btn.primary{ background: linear-gradient(135deg, var(--primary), var(--primary-2)); color:#fff }
.btn.ghost{ background:#fff1e6; color:#b65b16; border:1px solid #ffd9b8 }
.btn.warn{ background:#ffd58c; color:#6a3f00 }
.btn.danger{ background:var(--danger); color:#fff }
.btn.small{ padding:8px 10px; border-radius:10px; font-size:13px }
.hidden{ display:none }
.muted{ color:var(--muted) }

/* App Shell */
.app-shell{ max-width:1180px; margin:0 auto; padding: 16px clamp(12px, 3vw, 20px) }

/* Cards & Panels */
.panel{ background:transparent; padding:0; margin:16px 0 }
.card{
  background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
  box-shadow: var(--shadow); padding:16px;
}
.card.glass{
  background:rgba(255,255,255,.75);
  backdrop-filter: saturate(180%) blur(12px);
  border:1px solid #ffe0c4;
}
.section-head h2{ margin:0 0 6px; font-size:18px; font-weight:900 }
.section-card{
  background:#fff; border:1px solid #ffe7cf; border-radius:16px;
  padding:14px; box-shadow: var(--shadow); margin-top:12px
}
.section-row{ display:flex; align-items:center; justify-content:space-between; gap:12px }

/* Segmented */
.segmented{ display:inline-flex; border:1px solid var(--line); border-radius:999px; overflow:hidden; background:#fff; box-shadow: var(--shadow) }
.segmented .seg{ padding:10px 14px; border:0; background:transparent; font-weight:800; color:#7a4b1a; }
.segmented .seg.on{ background:#fff0e4; color:#ff7a00; }

/* Admin 2-column */
.admin-grid{ display:grid; grid-template-columns: 360px 1fr; gap:16px; align-items:start; margin-top:12px; }
.stick-left{ position:sticky; top:calc(10px + var(--safe-top,0px)); }

/* Search & Quick Register */
.search-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.quick-register details{
  margin-top:10px; background:#fff; border:1px solid #ffe7cf;
  border-radius:14px; padding:10px 12px; box-shadow: var(--shadow);
}
.quick-register summary{ cursor:pointer; font-weight:800; color:#ff7a00 }

/* Grids */
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
.grid.two{ grid-template-columns:1fr 1fr }
.quick-register .grid.three{ grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
.quick-register input, .quick-register select { width:100%; }
.grid button{ grid-column: span 1 }
.row{ display:flex; gap:8px; align-items:center }
.wrap{ flex-wrap:wrap }
.gap8{ gap:8px }
.mt8{ margin-top:8px } .mt16{ margin-top:16px }
.w110{ width:110px }

/* List */
.list{ display:grid; gap:8px; margin-top:8px }
.item{
  padding:12px 14px; border:1px solid #ffe5cc; border-radius:14px; background:#fff;
  display:flex; justify-content:space-between; align-items:center;
  transition:.16s transform ease, .16s box-shadow ease;
}
.item:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(255,122,0,.10) }
.list.small .item{ padding:10px; font-size:14px }

/* Member Card */
.member-card{ display:flex; flex-direction:column; gap:16px }
.member-card.compact{ gap:12px }
.member-head{ display:flex; justify-content:space-between; gap:16px; align-items:flex-start }
.m-name{ font-size:22px; font-weight:900 }

.stats{ display:flex; gap:10px; flex-wrap:wrap }
.stat{
  background:#fff; border:1px solid #ffe7cf; border-radius:999px; padding:10px 14px; min-width:120px;
  box-shadow: var(--shadow);
}
.stat.pill{ border-radius:999px }
.stat .label{ color:var(--muted); font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.5px }
.stat .value{ font-weight:900; font-size:20px }

/* Progress Dots */
.progress{ padding:4px 0 }

/* 손님 화면 하트줄 */
#selfDots.dots{ display:flex; justify-content:space-between; align-items:center; gap:4px; }

/* 관리자 화면: 10칸 게이지 */
#stampDots.dots{ display:grid; grid-template-columns: repeat(10, 1fr); gap:6px; }

/* 게이지 점 */
.dot{
  width:100%; height:14px; border-radius:8px;
  background:#fff6ed; border:1px solid #ffe2c9;
}
.dot.on{ background:#ffcf9e; }

/* 스탬프 이모지 */
.stamp{ font-size: clamp(18px, 5.5vw, 28px); line-height:1; display:block; margin:2px; }

/* Inputs */
input,select{
  padding:12px 14px; border-radius:14px; border:1px solid var(--line); background:#fff; color:var(--fg); box-shadow: var(--shadow);
}

/* Danger Zone */
.danger-zone{ background:#fff2f4; border:1px solid #ffe1e6; border-radius:16px }

/* FAB */
.fab-area{ position:fixed; right:16px; bottom: calc(16px + var(--safe-bottom, 0px)); z-index:999 }
.fab{
  width:56px; height:56px; border-radius:50%; border:0;
  background:linear-gradient(135deg, var(--primary-2), var(--primary));
  color:#fff; font-size:28px; font-weight:900;
  box-shadow: 0 14px 28px rgba(255,122,0,.28);
}

/* iOS style card for memberSelf */
.ios-card{ border-radius:24px; overflow:hidden; padding:0; }
.ios-card .ios-title{ padding:16px 16px 0; display:flex; justify-content:space-between; align-items:center; }
#selfQR canvas, #selfQR img{
  display:block; width:72px; height:72px; border-radius:12px; box-shadow: var(--shadow); background:#fff;
}
.ios-card .title-main{ font-size:22px; font-weight:900 }
.mini-pill{ background:#fff0e4; color:#ff7a00; border-radius:999px; padding:6px 10px; font-weight:800; font-size:12px }
#selfCard.member-card.compact{
  background:
    url('./penguin-mascot-fade.png') right 12px bottom 12px / 84px 84px no-repeat,
    linear-gradient(180deg,#fff, #fff7ef 60%, #fff3e6);
  border-top:1px solid #ffe2c9; padding:16px;
}
@media (max-width:480px){
  #selfCard.member-card.compact{
    background:
      url('./penguin-mascot-fade.png') right 8px bottom 8px / 64px 64px no-repeat,
      linear-gradient(180deg,#fff, #fff7ef 60%, #fff3e6);
  }
}

/* 손님 요약 박스 */
.summary-box{
  display:flex; flex-direction:column; gap:4px; padding:12px;
  border:1px solid #ffe2c9; border-radius:14px; background:#fff; box-shadow: var(--shadow);
}
.summary-row.top{ display:flex; justify-content:space-between; align-items:center; }
.summary-row.top .summary-title{ font-size:18px; font-weight:900; }
.summary-row.top .summary-badge{
  padding:6px 10px; border-radius:12px; background:#fff0e4; color:#ff7a00; font-weight:900; font-size:14px;
}
.summary-row.mid{ font-size:13px; color:var(--muted); white-space:nowrap; }
.summary-row.bottom{
  display:flex; flex-wrap:wrap; gap:8px 12px; font-size:13px; font-weight:700; color:#444; white-space:normal;
}
.summary-row.bottom .perk{ display:inline-flex; align-items:center; gap:4px; padding:6px 8px; border-radius:10px; background:#fff2e6; }
.summary-row.bottom b{ color:#ff7a00; font-weight:900; }

/* 팽귄 도장 격자 */
.stamp-grid{ margin-top:14px; display:grid; grid-template-columns: repeat(5, 1fr); gap:14px; }
.stamp-slot{ aspect-ratio:1/1; border-radius:50%; display:block; background:#fff; position:relative; border:2px dashed #ffd6ad; }
.stamp-slot.filled{
  border:2px solid transparent;
  background:
    var(--stamp-url) center/60% 60% no-repeat,
    radial-gradient(closest-side, transparent 70%, #ffffff 71%) center/100% 100% no-repeat,
    #ffffff;
  box-shadow: var(--shadow);
}
.stamp-slot.empty{ background: radial-gradient(closest-side, #fff7ef 70%, transparent 71%) center/100% 100% no-repeat; }
.stamp-note{ margin:10px 2px 0; font-size:12px }
@media (max-width:480px){ .stamp-grid{ gap:10px } }

/* Bottom Tabbar */
.tabbar{
  position:sticky; bottom:0; z-index:5;
  display:flex; justify-content:space-around; align-items:center;
  background: rgba(255,255,255,.9); backdrop-filter: blur(12px);
  border-top:1px solid var(--line); padding: 6px 8px calc(6px + var(--safe-bottom,0px));
}
.tab{ display:flex; flex-direction:column; align-items:center; gap:2px; padding:8px 10px; border-radius:12px; text-decoration:none; color:#c76b28; font-weight:800 }
.tab.on{ background:#fff0e4; color:#ff7a00 }
.tab .ico{ font-size:18px }
.tab .txt{ font-size:11px }

/* Debug */
.dbg-toggle{
  position:fixed; right: calc(16px + 56px + 12px); bottom: calc(16px + var(--safe-bottom, 0px)); z-index:9999;
  padding:10px 12px; border:0; border-radius:12px; background:#ff9b3f; color:#fff; font-weight:800; box-shadow: var(--shadow);
  opacity:.92;
}
.dbg-panel{
  position:fixed; right:12px; bottom:60px; width: min(92vw, 480px); height: 40vh;
  background:#fff; color:var(--fg); border:1px solid var(--line); border-radius:12px; 
  z-index:9999; display:flex; flex-direction:column; box-shadow: var(--shadow);
}
.dbg-panel.hidden{ display:none; }
.dbg-head{ display:flex; justify-content:space-between; align-items:center; padding:8px 10px; border-bottom:1px solid var(--line); }
.dbg-head button{ margin-left:6px; padding:6px 10px; border:0; border-radius:10px; background:#ff7a00; color:#fff; }
#__dbgArea{
  flex:1; width:100%; background:#fff7ef; color:#2c2f42;
  border:0; padding:10px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px;
  outline:none; resize:none; line-height:1.4;
}

/* 탭 컨텐츠 */
.tabpane{ display:none; }
.tabpane.active{ display:block; }

/* 손님 화면: 다회권 카드 */
.pass-card{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 14px; border-radius:14px; border:1px solid #ffe2c9;
  background:linear-gradient(135deg,#fffdfa,#fff3e6); box-shadow: var(--shadow);
  font-size:14px; font-weight:700;
}
.pass-card .p-name{ color:#5a3a18; font-weight:900; }
.pass-card .p-count{ background:#fff0e4; color:#ff7a00; font-weight:900; padding:6px 10px; border-radius:12px; min-width:48px; text-align:center; }

.stage-card{
  padding:12px; border-radius:14px; border:1px solid #ffe2c9; background:#fff; box-shadow: var(--shadow);
  display:flex; justify-content:space-between; align-items:center; font-size:14px; font-weight:700; margin-bottom:8px;
}
.stage-card .s-name{ color:#333; }
.stage-card .s-progress{ color:#ff7a00; font-weight:900; }
.stage-card.clear{ background:linear-gradient(135deg,#fff8dc,#ffe066); color:#8a5d00; }
.stage-card.clear .s-progress::after{ content:" 🏆✨"; }

/* Big QR */
.big-qr{ display:flex; justify-content:center; align-items:center; padding:20px 0; position:relative; }
.big-qr canvas, .big-qr img{ width:140px !important; height:140px !important; }

/* QR 저장 버튼(좌상단) */
.qr-dl-btn{
  position:absolute; top:6px; left:6px;
  padding:6px 10px; border:0; border-radius:10px;
  background:linear-gradient(135deg,#ff9b3f,#ff7a00);
  color:#fff; font-weight:900; font-size:12px; box-shadow: var(--shadow);
  opacity:.95; cursor:pointer;
}
.qr-dl-btn:hover{ transform: translateY(-1px); }

/* QR 모달 & 스캔 버튼 */
.qr-modal{
  position:fixed; inset:0; z-index:2000; display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,.45);
}
.qr-modal.hidden{ display:none; }
.qr-sheet{ width:min(92vw,520px); background:#fff; border-radius:16px; padding:12px; box-shadow: var(--shadow); }
#qrVideo{ width:100%; display:block; border-radius:12px; background:#000; }
.btn.highlight{
  background: linear-gradient(135deg, var(--primary-2), var(--primary));
  color:#fff; font-weight:900; box-shadow: 0 4px 12px rgba(255,122,0,.35); border:0;
}
.btn.highlight:hover{ filter: brightness(1.05); }

/* Header logout button (small) */
.logout-top{ position: absolute; top:10px; right:12px; z-index:1100; }
@media (max-width:480px){ .logout-top{ top:12px; right:10px; } }

/* Header mascot badge */
.mascot-badge{
  position:absolute; right:12px; top:48px;
  width:82px; height:82px; background:#fff; border:1px solid #ffe0c4;
  border-radius:20px; box-shadow: var(--shadow);
  display:flex; align-items:center; justify-content:center;
}
.mascot-badge img{ width:70px; height:70px; object-fit:contain; }
@media (max-width:520px){
  .mascot-badge{ width:70px; height:70px; top:56px; right:10px; }
  .mascot-badge img{ width:60px; height:60px; }
}

/* Responsive */
@media (max-width:1180px){ .app-shell{ padding: 14px 14px; } }
@media (max-width:1024px){
  .admin-grid{ grid-template-columns:1fr; }
  .stick-left{ position:relative; top:auto }
  .fab-area{ right:12px }
}
@media (max-width:680px){
  .auth-row{ flex-direction:column; align-items:stretch }
  .grid, .grid.two, .grid.three{ grid-template-columns:1fr }
  .large-title{ font-size:24px }
  .btn{ padding:12px 14px; border-radius:12px }
  .item{ border-radius:12px }
  .member-card .stat{ min-width:104px }
}
@media (max-width: 380px){ #selfDots.dots{ gap:2px; } }
@media (max-width: 1024px){ .quick-register .grid.three{ grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 680px){ .quick-register .grid.three{ grid-template-columns: 1fr; } }

/* 관리자: 액션 섹션 반응형 */
.admin-actions{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:1024px){ .admin-actions{ grid-template-columns:1fr; } }

/* 버튼 자동 채움 그리드 */
.btn-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap:8px; }

/* 입력 묶음 */
.input-actions{ display:grid; gap:8px; }
.ia-row{ display:grid; grid-template-columns:110px minmax(110px,160px) 1fr; gap:8px; align-items:center; }
.ia-label{ font-size:13px; font-weight:800; color:var(--muted); }
.ia-row input{ width:100%; }
.ia-buttons{ display:grid; grid-auto-flow:column; gap:8px; justify-content:start; }

/* 다회권: 추가 폼 */
.pass-add-grid{
  display:grid; grid-template-columns:minmax(0,1.4fr) 110px minmax(0,1fr) auto;
  gap:8px; align-items:center;
}
.pass-add-grid #passName, .pass-add-grid #passCount, .pass-add-grid #passExpire{ width:100%; min-width:0; }

/* 태블릿 2열 */
@media (max-width:900px){
  .pass-add-grid{ grid-template-columns:minmax(0,1fr) minmax(0,1fr); }
}

/* 스마트폰 1열 */
@media (max-width:680px){ .pass-add-grid{ grid-template-columns:1fr; } }

/* 다회권 조작 */
.pass-op-grid{
  display:grid; grid-template-columns:minmax(0,1fr) 110px auto; gap:8px; align-items:center;
}
.pass-op-grid select{ width:100%; min-width:0; }
.pass-op-grid input[type="number"]{ width:110px; }
.pass-op-grid .row{ display:flex; flex-wrap:wrap; gap:8px; }
.pass-op-grid .wFull{ grid-column:1 / -1; }
@media (max-width:900px){
  .pass-op-grid{ grid-template-columns:minmax(0,1fr) minmax(0,1fr); }
  .pass-op-grid select, .pass-op-grid .wFull{ grid-column: span 2; }
}
@media (max-width:680px){
  .pass-op-grid{ grid-template-columns:1fr; }
  .pass-op-grid input[type="number"]{ width:100%; }
  .pass-op-grid .row{ width:100%; justify-content:stretch; }
  .pass-op-grid .row .btn{ flex:1 1 48%; }
  .pass-op-grid .wFull{ grid-column:1; }
}

/* 터치 타겟 */
#passList, #stageList{ max-height:300px; overflow:auto; }
input, select{ min-height:42px; }
.btn{ min-height:42px; }

/* passExpire 폭 */
#passExpire{ width:200px; min-width:200px; }
@media (max-width:680px){ #passExpire{ width:100%; min-width:0; } }

/* 만료 D-day */
.p-remain{ color:#ff6b81; font-weight:900; font-size:13px; margin-left:6px; }
.p-remain.expired{ color:#aaa; }

/* 태블릿 레이아웃 보완 */
@media (max-width:1024px){
  .grid.two{ grid-template-columns:1fr; }
  .pass-op-grid{ grid-template-columns:1fr; }
  .pass-op-grid input[type="number"]{ width:100%; }
  #memberSection .section-card .row{ flex-wrap:wrap; }
}

/* Seg-header */
.seg-head{ display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap; }
/* Sign-up modal fine-tune (선택) */
#signupForm input { width:100%; }
@media (max-width:680px){
  #signupForm { grid-template-columns: 1fr !important; }
}
/* === PC에서 관리자 패널 2컬럼 (좌: 목록, 우: 상세) === */
@media (min-width: 1024px) {
  /* 패널을 가로 배치 */
  #adminPanel {
    display: flex;
    align-items: flex-start;
    gap: 16px;
  }

  /* 좌측 회원 목록: 고정폭 */
  #adminList {
    flex: 0 0 360px;      /* ← 필요시 320~400px로 조절 */
    max-width: 360px;
  }

  /* 우측 회원 상세: 넓게 */
  #memberSection {
    flex: 1 1 0;
    min-width: 720px;     /* ← 데스크톱에서 최소 폭 확보 */
    max-width: none;      /* 기존 max-width가 있다면 무시 */
  }
}

/* 더 큰 화면에서는 상세 더 넓게 */
@media (min-width: 1280px) {
  #memberSection { min-width: 860px; }
}

/* 상세 카드 내부에서 선택/입력 UI가 잘리지 않도록 */
#memberSection .row { 
  display: flex;
  flex-wrap: wrap;        /* 긴 셀렉트/인풋 줄바꿈 허용 */
  gap: 8px;
}

/* 다회권 셀렉트/인풋이 꽉 차게 */
#passSelect,
#passName,
#passCount,
#passDelta {
  width: 100%;
  max-width: 480px;       /* 넉넉한 한 줄 폭 */
}

/* 카드 본문이 overflow:hidden이면 선택 박스가 잘릴 수 있음 → 보이게 */
#memberSection .card .body {
  overflow: visible;
}
